
# C# 비동기 Delay 실질적 활용 사례

## 🔥 주요 활용 케이스

### 1. 재시도 로직 (Retry with Backoff)

```csharp
async Task<bool> TryConnectAsync()
{
    int retries = 5;
    for (int i = 0; i < retries; i++)
    {
        try
        {
            await ConnectToServerAsync();
            return true;
        }
        catch
        {
            if (i == retries - 1) throw;
            await Task.Delay(1000 * (int)Math.Pow(2, i)); // 지수 백오프
        }
    }
    return false;
}
```

---

### 2. 폴링(Polling)

```csharp
async Task PollStatusAsync()
{
    while (true)
    {
        var status = await GetStatusAsync();
        Console.WriteLine($"Status: {status}");
        await Task.Delay(5000); // 5초마다 상태 확인
    }
}
```

---

### 3. 타이머 대체 (Async Timer)

```csharp
async Task StartAsyncTimer(CancellationToken token)
{
    while (!token.IsCancellationRequested)
    {
        DoWork();
        await Task.Delay(TimeSpan.FromSeconds(10), token);
    }
}
```

---

### 4. Rate Limiting (속도 제한)

```csharp
SemaphoreSlim semaphore = new SemaphoreSlim(10, 10);

async Task CallApiAsync()
{
    await semaphore.WaitAsync();
    try
    {
        await CallExternalApi();
    }
    finally
    {
        _ = Task.Delay(1000).ContinueWith(_ => semaphore.Release());
    }
}
```

---

### 5. UI 효과 및 UX 개선

```csharp
async Task ShowLoadingAsync()
{
    ShowLoadingIndicator();
    await Task.Delay(2000); // 사용자에게 처리중임을 보여줌
    HideLoadingIndicator();
}
```

---

### 6. 테스트 및 모킹

```csharp
async Task<string> GetMockDataAsync()
{
    await Task.Delay(1500); // 네트워크 지연 흉내
    return "Mock Data";
}
```

---

### 7. 쿨다운 또는 스로틀링

```csharp
bool _isProcessing = false;

async Task OnButtonClickAsync()
{
    if (_isProcessing) return;
    _isProcessing = true;
    
    try
    {
        await ProcessAsync();
    }
    finally
    {
        await Task.Delay(2000); // 쿨다운 2초
        _isProcessing = false;
    }
}
```

---

## 💡 결론

비동기 Delay는 단순 시간 지연을 넘어서 시스템 안정화, 네트워크 신뢰성, UX 개선, 리소스 보호 등의 목적으로 매우 널리 사용된다.
특히 재시도, 폴링, Rate Limit은 거의 모든 영역에서 필수적이다.
