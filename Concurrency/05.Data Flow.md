# 데이터 흐름

비동기 방식 + 병렬 처리 + 흐름 제어를 좀더 쉽게 할 수 있도록 만들어진 라이브러리.
여러 기능을 하기 때문에 비동기, 병렬, 흐름제어에 대한 지식이 없는 상태에서는 단순히 복붙 수준으로 해보니 돌아는 가는데, 디버깅이나 최적화가 들어가는 순간 아무것도 못하게 될수도 있다.

| 도구             | 장점                  | 한계               |
| -------------- | ------------------- | ---------------- |
| `Task`         | 비동기 작업 실행           | 병렬성/큐/흐름 제어는 수작업 |
| `Parallel`     | 동시성 높은 CPU 작업       | 비동기 작업에는 부적합     |
| `TPL Dataflow` | 비동기 + 병렬 + 흐름 제어 통합 | 약간 학습 곡선 있음      |

학습 곡선이 있다는 말은 쉽게 배우기 힘들다는 의미 이고, 새로운 구성원이 들어 왔을 때 이 방식으로 개발을 설득하기에 어렵다는 것을 의미 한다.
아마 모듈, 서비스 단위의 최적화를 위해 일부 고급 인원들이 배우고 사용해야 하는 라이브러리가 아닐까 생각이 든다.

적용을 해야 하는 체크 리스트는 다음과 같다.

| 항목             | 질문                                    | 예/아니오 |
| -------------- | ------------------------------------- | ----- |
| **데이터 흐름 복잡도** | 데이터가 여러 단계/분기/병합을 거치며 비동기적으로 처리되나요?   |       |
| **병렬성 요구**     | 각 단계별로 병렬 처리 수준을 제어할 필요가 있나요?         |       |
| **데이터 양/스트림**  | 데이터가 지속적으로 유입되고 큐잉/백프레셔 관리가 필요한가요?    |       |
| **성능 요구**      | 단순한 Task 수준으로는 병목이 생기나요?              |       |
| **팀 역량**       | 팀에 병렬/비동기 흐름을 이해하고 설계할 수 있는 숙련자가 있나요? |       |
| **교육 가능성**     | 새 구성원에게 학습시킬 여유와 계획이 있나요?             |       |
| **유지보수 용이성**   | 유지보수 부담보다 성능/유연성 이점이 더 중요한가요?         |       |

그리고 대체 방안은 아래와 같다.

| 도구/패턴                    | 특징                                       | 장점                       | 단점                  |
| ------------------------ | ---------------------------------------- | ------------------------ | ------------------- |
| `Task`                   | 비동기 메서드 단위 처리                            | 간단, 배우기 쉽다               | 병렬/흐름 제어는 수작업       |
| `Task.WhenAll`           | 여러 작업의 동시 실행 및 완료 대기                     | 배우기 쉽다                   | 흐름 관리 불가            |
| `Parallel.ForEach`       | CPU 작업을 병렬 처리                            | 간단, CPU 활용 극대화           | 비동기 작업 불가           |
| `Channel<T>`             | `System.Threading.Channels` 기반 비동기 메시지 큐 | 비교적 가볍고 직관적              | 병렬성/흐름 제어는 코드에 작성해야 |
| `TPL Dataflow`           | 메시지 흐름 기반 비동기+병렬+흐름 제어                   | 강력, 유연, 유지보수 쉽다 (숙련자 한정) | 학습 곡선 있음            |
| Reactive Extensions (Rx) | 데이터 스트림/이벤트 기반 처리                        | 선언적, 함수형, 강력             | 패러다임 전환 부담          |
| Actor 모델 (ex: Akka.NET)  | 메시지를 보내는 액터 단위의 동시성 모델                   | 격리성 강하고 병렬성 뛰어남          | 학습 곡선 크고 무거움        |

## 블록 연결



